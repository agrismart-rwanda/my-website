<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Crop Details — AmizeroAI</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    :root{ --grad-start:#0f9b4a; --grad-end:#2b6ef6; --muted:#6b7280 }
    body{font-family:Inter,system-ui,Arial;background:linear-gradient(180deg,#f4f8fb,#eef6ff);margin:0;padding:20px}
    .wrap{max-width:1000px;margin:0 auto;background:#fff;border-radius:12px;padding:20px;border:1px solid rgba(15,15,15,0.03); box-shadow:0 12px 30px rgba(11,50,30,0.04)}
    .hero{display:flex;gap:18px;align-items:flex-start;flex-wrap:wrap}
    .hero img{width:420px;height:300px;object-fit:cover;border-radius:10px;border:1px solid rgba(0,0,0,0.04)}
    .meta{flex:1;min-width:260px}
    .meta h2{margin-top:0}
    .chips{display:flex;gap:8px;flex-wrap:wrap;margin-top:8px}
    .chip{background:linear-gradient(90deg,var(--grad-start),var(--grad-end)); color:white;padding:6px 10px;border-radius:999px;font-weight:600;font-size:0.85rem}
    .info-grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;margin-top:14px}
    .info-card{background:#f8fafc;padding:12px;border-radius:8px;border:1px solid rgba(15,15,15,0.03)}
    .back{margin-top:16px}
    footer{text-align:center;margin-top:20px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div id="content"></div>
    <div class="back">
      <a class="btn btn-outline-secondary" href="crops.html">← Back to Crops</a>
      <a class="btn btn-outline-primary" href="index.html">Home</a>
      <a class="btn btn-success" id="openImage" target="_blank" style="margin-left:8px">Open Image</a>
    </div>
  </div>
  <footer>AmizeroAI • Amizero AgriSmart</footer>

  <script src="crops-data.js"></script>
  <script>
    const params = new URLSearchParams(location.search);
    const id = parseInt(params.get('id')||'0',10);
    const crop = (window.CROPS || []).find(c=>c.id===id);
    const content = document.getElementById('content');
    const openImageBtn = document.getElementById('openImage');

    function imgFor(urlOrQuery){
      if(!urlOrQuery) return 'https://source.unsplash.com/1200x800/?farm';
      return urlOrQuery.startsWith('http') ? urlOrQuery : `https://source.unsplash.com/1200x800/?${encodeURIComponent(urlOrQuery)}`;
    }

    if(!crop){
      content.innerHTML = `<div class="alert alert-warning">Crop not found. <a href="crops.html">Return to catalog</a>.</div>`;
      openImageBtn.style.display='none';
    } else {
      content.innerHTML = `
        <div class="hero">
          <img src="${imgFor(crop.image||crop.name)}" alt="${crop.name}">
          <div class="meta">
            <h2>${crop.name} <small class="text-muted">• ${crop.category}</small></h2>
            <div class="chips">
              <div class="chip">Season: ${crop.season || '—'}</div>
              <div class="chip">Soil: ${crop.soil || '—'}</div>
              <div class="chip">Fertilizer: ${crop.fertilizer || '—'}</div>
            </div>
            <p style="margin-top:12px;color:#374151">${crop.description || ''}</p>

            <div class="info-grid">
              <div class="info-card"><strong>Pests & Diseases</strong><div style="margin-top:6px">${crop.pests || '—'}</div></div>
              <div class="info-card"><strong>Uses & Notes</strong><div style="margin-top:6px">${crop.notes || 'Food, market, and best practices.'}</div></div>
              <div class="info-card"><strong>Recommended Practices</strong><div style="margin-top:6px">${crop.recommendations || 'Rotate crops, use certified seed, soil test.'}</div></div>
            </div>
          </div>
        </div>
      `;
      openImageBtn.href = imgFor(crop.image||crop.name);
    }
  </script>
</body>
</html>
